chrome.action.onClicked.addListener((e=>{if(console.log("Click received."),e.url.match(/chrome:\/\//))console.error("cannot use this plugin in this page!");else{chrome.scripting.executeScript({target:{tabId:e.id},files:["content.js"]});try{chrome.tabs.sendMessage(e.id,{action:"toggleDialog"})}catch(e){console.log(e)}}})),chrome.runtime.onMessage.addListener(((e,t,c)=>{if("fetchIndex"===e.action){try{return fetch(chrome.runtime.getURL("index.html")).then((e=>e.text())).then((e=>c({content:e}))).catch((e=>c({error:"Failed to load content."}))),!0}catch(e){console.log(e)}return!1}}));