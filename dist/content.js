if(!window.gptwriter||"function"!=typeof toggleModal){window.gptwriter=!0;const e=(e,t)=>new Promise(((o,n)=>{console.log("Loading script...");const i=document.createElement("script");i.src=t,i.onload=()=>o(),i.onerror=()=>n(new Error(`Failed to load script: ${t}`)),e.appendChild(i)})),t=async e=>(await fetch(e)).text(),o=(e,t)=>{const o=document.createElement("style");o.textContent=t,e.appendChild(o)},n=e=>{t(chrome.runtime.getURL("styles.css")).then((t=>{o(e,t)}))};let i,l;const c=()=>{let e=!1;if(null==l||!document.contains(i)){i=document.createElement("div"),i.style.position="fixed",i.style.display="flex",i.style.zIndex="9999990",i.style.left="calc(50vw - 350px)",i.style.top="calc(50vh - 250px)",document.body.appendChild(i);let t=i.attachShadow({mode:"open"});n(t);let o=document.createElement("div");o.style.position="fixed",o.style.display="flex",o.style.zIndex="9999990",o.style.left="calc(50vw - 350px)",o.style.top="calc(50vh - 250px)",t.appendChild(o),l=o,e=!0,a(l)}toggleModal(l,e)},a=async t=>{await e(t,chrome.runtime.getURL("react.production.min.js")),await e(t,chrome.runtime.getURL("react-dom.production.min.js")),await e(t,chrome.runtime.getURL("modal.js"))};chrome.runtime.onMessage.addListener(((e,t,o)=>{"toggleDialog"===e.action&&c()})),window.addEventListener("message",(e=>{if(e.origin!==window.location.origin)return;const{type:t}=e.data;"TOGGLE_DIALOG"===t&&(console.log("Toggle dialog received"),c())}))}