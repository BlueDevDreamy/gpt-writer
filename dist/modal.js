/*! For license information please see modal.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("React"),require("ReactDOM"));else if("function"==typeof define&&define.amd)define(["React","ReactDOM"],t);else{var n="object"==typeof exports?t(require("React"),require("ReactDOM")):t(e.React,e.ReactDOM);for(var s in n)("object"==typeof exports?exports:e)[s]=n[s]}}(self,((e,t)=>(()=>{var n={53:(e,t,n)=>{"use strict";function s(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=s(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=s(e))&&(r&&(r+=" "),r+=t);return r}n.r(t),n.d(t,{clsx:()=>r,default:()=>o});const o=r},694:(e,t,n)=>{"use strict";var s=n(925);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,a){if(a!==s){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},556:(e,t,n)=>{e.exports=n(694)()},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},338:(e,t,n)=>{"use strict";var s=n(845);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},27:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(s,o,a):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}(n(883)),r=h(n(556)),o=h(n(845)),a=h(n(53)),i=n(89),l=n(726),c=n(56),u=h(n(888)),d=h(n(696));function h(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},p.apply(this,arguments)}function m(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends s.Component{static getDerivedStateFromProps(e,t){let{position:n}=e,{prevPropsPosition:s}=t;return!n||s&&n.x===s.x&&n.y===s.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:s}),{x:n.x,y:n.y,prevPropsPosition:{...n}})}constructor(e){super(e),m(this,"onDragStart",((e,t)=>{if((0,d.default)("Draggable: onDragStart: %j",t),!1===this.props.onStart(e,(0,l.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})})),m(this,"onDrag",((e,t)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",t);const n=(0,l.createDraggableData)(this,t),s={x:n.x,y:n.y,slackX:0,slackY:0};if(this.props.bounds){const{x:e,y:t}=s;s.x+=this.state.slackX,s.y+=this.state.slackY;const[r,o]=(0,l.getBoundPosition)(this,s.x,s.y);s.x=r,s.y=o,s.slackX=this.state.slackX+(e-s.x),s.slackY=this.state.slackY+(t-s.y),n.x=s.x,n.y=s.y,n.deltaX=s.x-this.state.x,n.deltaY=s.y-this.state.y}if(!1===this.props.onDrag(e,n))return!1;this.setState(s)})),m(this,"onDragStop",((e,t)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(e,(0,l.createDraggableData)(this,t)))return!1;(0,d.default)("Draggable: onDragStop: %j",t);const n={dragging:!1,slackX:0,slackY:0};if(Boolean(this.props.position)){const{x:e,y:t}=this.props.position;n.x=e,n.y=t}this.setState(n)})),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var e,t;return null!==(e=null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current)&&void 0!==e?e:o.default.findDOMNode(this)}render(){const{axis:e,bounds:t,children:n,defaultPosition:r,defaultClassName:o,defaultClassNameDragging:c,defaultClassNameDragged:d,position:h,positionOffset:f,scale:m,...g}=this.props;let y={},w=null;const b=!Boolean(h)||this.state.dragging,v=h||r,x={x:(0,l.canDragX)(this)&&b?this.state.x:v.x,y:(0,l.canDragY)(this)&&b?this.state.y:v.y};this.state.isElementSVG?w=(0,i.createSVGTransform)(x,f):y=(0,i.createCSSTransform)(x,f);const _=(0,a.default)(n.props.className||"",o,{[c]:this.state.dragging,[d]:this.state.dragged});return s.createElement(u.default,p({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),s.cloneElement(s.Children.only(n),{className:_,style:{...n.props.style,...y},transform:w}))}}t.default=g,m(g,"displayName","Draggable"),m(g,"propTypes",{...u.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),m(g,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},888:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(s,o,a):s[o]=e[o]}return s.default=e,n&&n.set(e,s),s}(n(883)),r=u(n(556)),o=u(n(845)),a=n(89),i=n(726),l=n(56),c=u(n(696));function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f={start:"touchstart",move:"touchmove",stop:"touchend"},p={start:"mousedown",move:"mousemove",stop:"mouseup"};let m=p;class g extends s.Component{constructor(){super(...arguments),h(this,"dragging",!1),h(this,"lastX",NaN),h(this,"lastY",NaN),h(this,"touchIdentifier",null),h(this,"mounted",!1),h(this,"handleDragStart",(e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=t;if(this.props.disabled||!(e.target instanceof n.defaultView.Node)||this.props.handle&&!(0,a.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,a.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"===e.type&&e.preventDefault();const s=(0,a.getTouchIdentifier)(e);this.touchIdentifier=s;const r=(0,i.getControlPosition)(e,s,this);if(null==r)return;const{x:o,y:l}=r,u=(0,i.createCoreData)(this,o,l);(0,c.default)("DraggableCore: handleDragStart: %j",u),(0,c.default)("calling",this.props.onStart),!1!==this.props.onStart(e,u)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,a.addUserSelectStyles)(n),this.dragging=!0,this.lastX=o,this.lastY=l,(0,a.addEvent)(n,m.move,this.handleDrag),(0,a.addEvent)(n,m.stop,this.handleDragStop))})),h(this,"handleDrag",(e=>{const t=(0,i.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:s}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX,t=s-this.lastY;if([e,t]=(0,i.snapToGrid)(this.props.grid,e,t),!e&&!t)return;n=this.lastX+e,s=this.lastY+t}const r=(0,i.createCoreData)(this,n,s);if((0,c.default)("DraggableCore: handleDrag: %j",r),!1!==this.props.onDrag(e,r)&&!1!==this.mounted)this.lastX=n,this.lastY=s;else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(e){const t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(t)}})),h(this,"handleDragStop",(e=>{if(!this.dragging)return;const t=(0,i.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:s}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX||0,t=s-this.lastY||0;[e,t]=(0,i.snapToGrid)(this.props.grid,e,t),n=this.lastX+e,s=this.lastY+t}const r=(0,i.createCoreData)(this,n,s);if(!1===this.props.onStop(e,r)||!1===this.mounted)return!1;const o=this.findDOMNode();o&&this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(o.ownerDocument),(0,c.default)("DraggableCore: handleDragStop: %j",r),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,o&&((0,c.default)("DraggableCore: Removing handlers"),(0,a.removeEvent)(o.ownerDocument,m.move,this.handleDrag),(0,a.removeEvent)(o.ownerDocument,m.stop,this.handleDragStop))})),h(this,"onMouseDown",(e=>(m=p,this.handleDragStart(e)))),h(this,"onMouseUp",(e=>(m=p,this.handleDragStop(e)))),h(this,"onTouchStart",(e=>(m=f,this.handleDragStart(e)))),h(this,"onTouchEnd",(e=>(m=f,this.handleDragStop(e))))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,a.addEvent)(e,f.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,a.removeEvent)(t,p.move,this.handleDrag),(0,a.removeEvent)(t,f.move,this.handleDrag),(0,a.removeEvent)(t,p.stop,this.handleDragStop),(0,a.removeEvent)(t,f.stop,this.handleDragStop),(0,a.removeEvent)(e,f.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current:o.default.findDOMNode(this)}render(){return s.cloneElement(s.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}t.default=g,h(g,"displayName","DraggableCore"),h(g,"propTypes",{allowAnyClick:r.default.bool,children:r.default.node.isRequired,disabled:r.default.bool,enableUserSelectHack:r.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:r.default.arrayOf(r.default.number),handle:r.default.string,cancel:r.default.string,nodeRef:r.default.object,onStart:r.default.func,onDrag:r.default.func,onStop:r.default.func,onMouseDown:r.default.func,scale:r.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),h(g,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},794:(e,t,n)=>{"use strict";const{default:s,DraggableCore:r}=n(27);e.exports=s,e.exports.default=s,e.exports.DraggableCore=r},89:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=c,t.addEvent=function(e,t,n,s){if(!e)return;const r={capture:!0,...s};e.addEventListener?e.addEventListener(t,n,r):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},t.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&c(e.body,"react-draggable-transparent-selection")},t.createCSSTransform=function(e,t){const n=l(e,t,"px");return{[(0,r.browserPrefixToKey)("transform",r.default)]:n}},t.createSVGTransform=function(e,t){return l(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,s.findInArray)(e.targetTouches,(e=>t===e.identifier))||e.changedTouches&&(0,s.findInArray)(e.changedTouches,(e=>t===e.identifier))},t.getTouchIdentifier=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0},t.getTranslation=l,t.innerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,s.int)(n.paddingTop),t-=(0,s.int)(n.paddingBottom),t},t.innerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,s.int)(n.paddingLeft),t-=(0,s.int)(n.paddingRight),t},t.matchesSelector=i,t.matchesSelectorAndParentsTo=function(e,t,n){let s=e;do{if(i(s,t))return!0;if(s===n)return!1;s=s.parentNode}while(s);return!1},t.offsetXYFromParent=function(e,t,n){const s=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-s.left)/n,y:(e.clientY+t.scrollTop-s.top)/n}},t.outerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,s.int)(n.borderTopWidth),t+=(0,s.int)(n.borderBottomWidth),t},t.outerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,s.int)(n.borderLeftWidth),t+=(0,s.int)(n.borderRightWidth),t},t.removeClassName=u,t.removeEvent=function(e,t,n,s){if(!e)return;const r={capture:!0,...s};e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},t.removeUserSelectStyles=function(e){if(e)try{if(e.body&&u(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var s=n(56),r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(s,a,i):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(n(514));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}let a="";function i(e,t){return a||(a=(0,s.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,s.isFunction)(e[t])}))),!!(0,s.isFunction)(e[a])&&e[a](t)}function l(e,t,n){let{x:s,y:r}=e,o="translate(".concat(s).concat(n,",").concat(r).concat(n,")");if(t){const e="".concat("string"==typeof t.x?t.x:t.x+n),s="".concat("string"==typeof t.y?t.y:t.y+n);o="translate(".concat(e,", ").concat(s,")")+o}return o}function c(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function u(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},514:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=r,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=s;const n=["Moz","Webkit","O","ms"];function s(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";const s=null===(e=window.document)||void 0===e||null===(e=e.documentElement)||void 0===e?void 0:e.style;if(!s)return"";if(t in s)return"";for(let e=0;e<n.length;e++)if(r(t,n[e])in s)return n[e];return""}function r(e,t){return t?"".concat(t).concat(function(e){let t="",n=!0;for(let s=0;s<e.length;s++)n?(t+=e[s].toUpperCase(),n=!1):"-"===e[s]?n=!0:t+=e[s];return t}(e)):e}t.default=s()},696:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,n){const r=!(0,s.isNum)(e.lastX),a=o(e);return r?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:a,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}},t.createDraggableData=function(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:a}=e.props;a="string"==typeof a?a:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(a);const i=o(e);if("string"==typeof a){const{ownerDocument:e}=i,t=e.defaultView;let n;if(n="parent"===a?i.parentNode:e.querySelector(a),!(n instanceof t.HTMLElement))throw new Error('Bounds selector "'+a+'" could not find an element.');const o=n,l=t.getComputedStyle(i),c=t.getComputedStyle(o);a={left:-i.offsetLeft+(0,s.int)(c.paddingLeft)+(0,s.int)(l.marginLeft),top:-i.offsetTop+(0,s.int)(c.paddingTop)+(0,s.int)(l.marginTop),right:(0,r.innerWidth)(o)-(0,r.outerWidth)(i)-i.offsetLeft+(0,s.int)(c.paddingRight)-(0,s.int)(l.marginRight),bottom:(0,r.innerHeight)(o)-(0,r.outerHeight)(i)-i.offsetTop+(0,s.int)(c.paddingBottom)-(0,s.int)(l.marginBottom)}}return(0,s.isNum)(a.right)&&(t=Math.min(t,a.right)),(0,s.isNum)(a.bottom)&&(n=Math.min(n,a.bottom)),(0,s.isNum)(a.left)&&(t=Math.max(t,a.left)),(0,s.isNum)(a.top)&&(n=Math.max(n,a.top)),[t,n]},t.getControlPosition=function(e,t,n){const s="number"==typeof t?(0,r.getTouch)(e,t):null;if("number"==typeof t&&!s)return null;const a=o(n),i=n.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,r.offsetXYFromParent)(s||e,i,n.props.scale)},t.snapToGrid=function(e,t,n){return[Math.round(t/e[0])*e[0],Math.round(n/e[1])*e[1]]};var s=n(56),r=n(89);function o(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},56:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(let n=0,s=e.length;n<s;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)}},20:(e,t,n)=>{"use strict";var s=n(883),r=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var s,l={},c=null,u=null;for(s in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,s)&&!i.hasOwnProperty(s)&&(l[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===l[s]&&(l[s]=t[s]);return{$$typeof:r,type:e,key:c,ref:u,props:l,_owner:a.current}}t.jsx=l,t.jsxs=l},848:(e,t,n)=>{"use strict";e.exports=n(20)},883:t=>{"use strict";t.exports=e},845:e=>{"use strict";e.exports=t}},s={};function r(e){var t=s[e];if(void 0!==t)return t.exports;var o=s[e]={exports:{}};return n[e](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{"use strict";r.r(o),r.d(o,{toggleModal:()=>wr});var e={};r.r(e),r.d(e,{xX:()=>Qe,qA:()=>et,LG:()=>Ke,cH:()=>Ze,v3:()=>nt,v7:()=>tt,fK:()=>ot,pf:()=>ut,PO:()=>lt,k5:()=>ct,m_:()=>rt,vc:()=>Ge,Ll:()=>st,OE:()=>it,Is:()=>at});var t=r(848),n=r(883),s=r.n(n),a=r(338),i=r(794),l=r.n(i),c={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},u=n.createContext&&n.createContext(c),d=["attr","size","title"];function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},h.apply(this,arguments)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){var s,r,o,a;s=e,r=t,o=n[t],(r="symbol"==typeof(a=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r))?a:a+"")in s?Object.defineProperty(s,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[r]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){return e&&e.map(((e,t)=>n.createElement(e.tag,p({key:t},e.attr),m(e.child))))}function g(e){return t=>n.createElement(y,h({attr:p({},e.attr)},t),m(e.child))}function y(e){var t=t=>{var s,{attr:r,size:o,title:a}=e,i=function(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,d),l=o||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),n.createElement("svg",h({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,i,{className:s,style:p(p({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&n.createElement("title",null,a),e.children)};return void 0!==u?n.createElement(u.Consumer,null,(e=>t(e))):t(c)}function w(e){return g({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3 16h10l1-11h-12zM10 2v-2h-4v2h-5v3l1-1h12l1 1v-3h-5zM9 2h-2v-1h2v1z"},child:[]}]})(e)}function b(e){return g({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M1.5 1.5A.5.5 0 0 0 1 2v4.8a2.5 2.5 0 0 0 2.5 2.5h9.793l-3.347 3.346a.5.5 0 0 0 .708.708l4.2-4.2a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 8.3H3.5A1.5 1.5 0 0 1 2 6.8V2a.5.5 0 0 0-.5-.5"},child:[]}]})(e)}const v=function(e){var n=e.placeholder,s=e.value,r=e.onChange,o=e.hadleContext;return(0,t.jsx)("div",{className:"mb-2 border-b border-brown p-2",children:(0,t.jsxs)("div",{className:"rounded-md",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center px-2 py-2 bg-gray-50 ",children:[(0,t.jsxs)("button",{className:"flex items-center text-[#222]",children:[(0,t.jsx)(b,{size:16,className:"mr-2"}),"Context"]}),(0,t.jsx)("button",{onClick:function(){r(""),o(!0)},className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)(w,{size:16})})]}),(0,t.jsx)("input",{value:s,onChange:function(e){r(e.target.value)},placeholder:n,className:"w-full pl-4 pb-4 text-sm text-gray-700 placeholder-gray-400 bg-white border-0 focus:outline-none focus:ring-0"})]})})},x=function(e){var n=e.placeholder,s=e.value,r=e.onChange;return(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("input",{type:"text",className:"w-full p-3 py-2 text-sm text-gray-700 placeholder-gray-400 bg-white rounded-md border-0 focus:outline-none focus:ring-0",placeholder:n,value:s,onChange:function(e){return r(e.target.value)}})})},_=(...e)=>e.filter(((e,t,n)=>Boolean(e)&&n.indexOf(e)===t)).join(" ");var S={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const j=(0,n.forwardRef)((({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:i,...l},c)=>(0,n.createElement)("svg",{ref:c,...S,width:t,height:t,stroke:e,strokeWidth:r?24*Number(s)/Number(t):s,className:_("lucide",o),...l},[...i.map((([e,t])=>(0,n.createElement)(e,t))),...Array.isArray(a)?a:[a]]))),O=((e,t)=>{const s=(0,n.forwardRef)((({className:s,...r},o)=>{return(0,n.createElement)(j,{ref:o,iconNode:t,className:_(`lucide-${a=e,a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,s),...r});var a}));return s.displayName=`${e}`,s})("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var P;function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},C.apply(null,arguments)}const E=e=>n.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",fill:"#42a7a7",viewBox:"0 0 150 150"},e),n.createElement("path",{d:"M0 0h150v150H0z",style:{fill:"none"}}),P||(P=n.createElement("path",{d:"M132.17 62.55a33.26 33.26 0 0 0-2.87-27.3c-7.28-12.67-21.91-19.19-36.19-16.12C80.66 5.28 59.34 4.15 45.49 16.6c-4.4 3.95-7.67 8.99-9.51 14.61a33.3 33.3 0 0 0-22.23 16.12c-7.36 12.65-5.69 28.61 4.13 39.46a33.25 33.25 0 0 0 2.84 27.3c7.29 12.67 21.93 19.19 36.22 16.12a33.29 33.29 0 0 0 25.07 11.18c14.64.01 27.62-9.44 32.09-23.38 9.38-1.93 17.48-7.8 22.23-16.12a33.67 33.67 0 0 0-4.16-39.33Zm-50.16 70.1c-5.85 0-11.51-2.04-15.99-5.79l.79-.45 26.57-15.34a4.41 4.41 0 0 0 2.18-3.79V69.82l11.23 6.5c.11.06.19.16.21.29v31.04c-.03 13.79-11.2 24.96-24.99 24.99ZM28.3 109.71a24.87 24.87 0 0 1-2.97-16.76l.79.47 26.59 15.34c1.34.79 3 .79 4.34 0l32.49-18.73V103c0 .14-.07.26-.18.34l-26.91 15.52c-11.96 6.89-27.24 2.79-34.14-9.15Zm-7-57.87c2.95-5.09 7.61-8.98 13.15-10.97v31.57c-.02 1.55.81 2.99 2.16 3.76l32.33 18.65-11.23 6.5c-.12.07-.27.07-.39 0L30.46 85.86c-11.93-6.92-16.03-22.18-9.15-34.14v.13Zm92.28 21.44L81.15 54.45l11.21-6.47c.12-.07.27-.07.39 0l26.86 15.52c11.95 6.9 16.05 22.18 9.15 34.13-2.9 5.03-7.47 8.9-12.92 10.93V76.99a4.41 4.41 0 0 0-2.26-3.71m11.18-16.81-.79-.47-26.54-15.47a4.33 4.33 0 0 0-4.37 0L60.6 59.26V46.29c-.01-.13.05-.27.16-.34l26.86-15.49c11.97-6.9 27.27-2.78 34.16 9.19a25.02 25.02 0 0 1 2.98 16.72v.11ZM54.47 79.46l-11.23-6.47a.45.45 0 0 1-.21-.32V41.71c.02-13.82 11.23-25 25.05-24.98 5.83 0 11.48 2.05 15.96 5.78l-.79.45L56.68 38.3a4.41 4.41 0 0 0-2.18 3.79l-.03 37.38Zm6.1-13.15 14.47-8.34 14.49 8.34v16.68l-14.44 8.34-14.49-8.34z"})));var A;function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},k.apply(null,arguments)}const R=e=>n.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",fill:"#769dd9",viewBox:"0 0 150 150"},e),n.createElement("path",{d:"M0 0h150v150H0z",style:{fill:"none"}}),A||(A=n.createElement("path",{d:"M132.17 62.55a33.26 33.26 0 0 0-2.87-27.3c-7.28-12.67-21.91-19.19-36.19-16.12C80.66 5.28 59.34 4.15 45.49 16.6c-4.4 3.95-7.67 8.99-9.51 14.61a33.3 33.3 0 0 0-22.23 16.12c-7.36 12.65-5.69 28.61 4.13 39.46a33.25 33.25 0 0 0 2.84 27.3c7.29 12.67 21.93 19.19 36.22 16.12a33.29 33.29 0 0 0 25.07 11.18c14.64.01 27.62-9.44 32.09-23.38 9.38-1.93 17.48-7.8 22.23-16.12a33.67 33.67 0 0 0-4.16-39.33Zm-50.16 70.1c-5.85 0-11.51-2.04-15.99-5.79l.79-.45 26.57-15.34a4.41 4.41 0 0 0 2.18-3.79V69.82l11.23 6.5c.11.06.19.16.21.29v31.04c-.03 13.79-11.2 24.96-24.99 24.99ZM28.3 109.71a24.87 24.87 0 0 1-2.97-16.76l.79.47 26.59 15.34c1.34.79 3 .79 4.34 0l32.49-18.73V103c0 .14-.07.26-.18.34l-26.91 15.52c-11.96 6.89-27.24 2.79-34.14-9.15Zm-7-57.87c2.95-5.09 7.61-8.98 13.15-10.97v31.57c-.02 1.55.81 2.99 2.16 3.76l32.33 18.65-11.23 6.5c-.12.07-.27.07-.39 0L30.46 85.86c-11.93-6.92-16.03-22.18-9.15-34.14v.13Zm92.28 21.44L81.15 54.45l11.21-6.47c.12-.07.27-.07.39 0l26.86 15.52c11.95 6.9 16.05 22.18 9.15 34.13-2.9 5.03-7.47 8.9-12.92 10.93V76.99a4.41 4.41 0 0 0-2.26-3.71m11.18-16.81-.79-.47-26.54-15.47a4.33 4.33 0 0 0-4.37 0L60.6 59.26V46.29c-.01-.13.05-.27.16-.34l26.86-15.49c11.97-6.9 27.27-2.78 34.16 9.19a25.02 25.02 0 0 1 2.98 16.72v.11ZM54.47 79.46l-11.23-6.47a.45.45 0 0 1-.21-.32V41.71c.02-13.82 11.23-25 25.05-24.98 5.83 0 11.48 2.05 15.96 5.78l-.79.45L56.68 38.3a4.41 4.41 0 0 0-2.18 3.79l-.03 37.38Zm6.1-13.15 14.47-8.34 14.49 8.34v16.68l-14.44 8.34-14.49-8.34z"})));function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},N.apply(null,arguments)}const D=e=>n.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 150 150"},e),n.createElement("path",{d:"M120 76.1c0-3.1-.3-6.3-.8-9.3H75.9v17.7h24.8c-1 5.7-4.3 10.7-9.2 13.9l14.8 11.5C115 101.8 120 90 120 76.1",style:{fill:"#4280ef"}}),n.createElement("path",{d:"M75.9 120.9c12.4 0 22.8-4.1 30.4-11.1L91.5 98.4c-4.1 2.8-9.4 4.4-15.6 4.4-12 0-22.1-8.1-25.8-18.9L34.9 95.6c7.8 15.5 23.6 25.3 41 25.3",style:{fill:"#34a353"}}),n.createElement("path",{d:"M50.1 83.8c-1.9-5.7-1.9-11.9 0-17.6L34.9 54.4c-6.5 13-6.5 28.3 0 41.2z",style:{fill:"#f6b704"}}),n.createElement("path",{d:"M75.9 47.3c6.5-.1 12.9 2.4 17.6 6.9L106.6 41c-8.3-7.8-19.3-12-30.7-11.9-17.4 0-33.2 9.8-41 25.3l15.2 11.8c3.7-10.9 13.8-18.9 25.8-18.9",style:{fill:"#e54335"}}));var M,I,T,$;function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},L.apply(null,arguments)}const B=e=>n.createElement("svg",L({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"},e),M||(M=n.createElement("path",{fill:"#f0f0f0",d:"M0 0h100v100H0z"})),I||(I=n.createElement("rect",{width:60,height:40,x:20,y:20,fill:"#fff",stroke:"gray",strokeWidth:2,rx:5,ry:5})),T||(T=n.createElement("path",{fill:"none",stroke:"gray",strokeWidth:2,d:"m21 21 29 18 29-18"})),$||($=n.createElement("text",{x:80,y:90,fill:"gray",fontFamily:"Arial, sans-serif",fontSize:35,textAnchor:"end"},"*")));function W(e){return g({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12.8536 2.85355C13.0488 2.65829 13.0488 2.34171 12.8536 2.14645C12.6583 1.95118 12.3417 1.95118 12.1464 2.14645L7.5 6.79289L2.85355 2.14645C2.65829 1.95118 2.34171 1.95118 2.14645 2.14645C1.95118 2.34171 1.95118 2.65829 2.14645 2.85355L6.79289 7.5L2.14645 12.1464C1.95118 12.3417 1.95118 12.6583 2.14645 12.8536C2.34171 13.0488 2.65829 13.0488 2.85355 12.8536L7.5 8.20711L12.1464 12.8536C12.3417 13.0488 12.6583 13.0488 12.8536 12.8536C13.0488 12.6583 13.0488 12.3417 12.8536 12.1464L8.20711 7.5L12.8536 2.85355Z",fill:"currentColor"},child:[]}]})(e)}const F=function(e){var s=e.onChange,r=(0,n.useState)(!1),o=r[0],a=r[1],i=(0,n.useState)({name:"GPT 4o Mini",locked:!1,icon:(0,t.jsx)(E,{width:20,height:20})}),l=i[0],c=i[1],u=[{name:"Sonnet 3.5",locked:!0,icon:(0,t.jsx)(B,{width:20,height:20})},{name:"GPT 4o",locked:!0,icon:(0,t.jsx)(R,{width:20,height:20})},{name:"GPT 4o Mini",locked:!1,icon:(0,t.jsx)(E,{width:20,height:20})},{name:"Gemini 1.5F",locked:!1,icon:(0,t.jsx)(D,{width:20,height:20})}];return(0,t.jsxs)("div",{className:"relative inline-block text-left h-[30px]",children:[o&&(0,t.jsx)("div",{className:"origin-top-right absolute mt-2 w-[150px] bottom-[35px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,t.jsx)("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:u.map((function(e,n){return(0,t.jsxs)("button",{onClick:function(){return function(e){e.locked||(c(e),s(e.name),a(!1))}(e)},className:"\n                ".concat(e.locked?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-yellow hover:text-gray-900","\n                group flex items-center w-full px-2 py-1 text-sm\n              "),role:"menuitem",disabled:e.locked,children:[e.icon,(0,t.jsx)("span",{className:"flex-grow",children:e.name}),e.locked&&(0,t.jsx)("span",{className:"ml-3 text-gray-400",children:"ðŸ”’"})]},n)}))})}),(0,t.jsx)("div",{className:"h-[30px]",children:(0,t.jsxs)("button",{type:"button",onClick:function(){return a(!o)},className:"inline-flex justify-between items-center w-[150px] h-[30px] rounded-md border border-yellow shadow-sm px-2 py-1 bg-yellow text-sm font-medium text-gray-700 hover:bg-yellow focus:outline-none focus:ring-0",children:[l.icon,(0,t.jsx)("span",{children:l.name}),o?(0,t.jsx)(O,{className:"ml-2 h-5 w-5","aria-hidden":"true"}):(0,t.jsx)(W,{className:"ml-2 h-4 w-4","aria-hidden":"true"})]})})]})};function q(e){return g({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"},child:[]}]})(e)}const X=function(e){var s=e.onChange,r=(0,n.useState)(!1),o=r[0],a=r[1],i=(0,n.useState)("Writing tone"),l=i[0],c=i[1];return(0,t.jsxs)("div",{className:"relative h-[30px]",children:[o&&(0,t.jsx)("div",{className:"absolute z-10 bottom-[35px] mt-2 w-full bg-white border rounded-md shadow-lg overflow-auto",children:["Auto","Professional","Casual","Straightforward","Confident","Friendly"].map((function(e,n){return(0,t.jsxs)("div",{className:"py-1 px-3 cursor-pointer hover:bg-yellow text-gray-700 flex items-center gap-2",onClick:function(){return function(e){c(e),s(e),a(!1)}(e)},children:[e,"Auto"===e&&(0,t.jsx)(q,{})]},n)}))}),(0,t.jsxs)("button",{onClick:function(){a(!o)},className:"flex items-center justify-between w-[140px] p-1 border rounded-md text-gray-700 bg-yellow hover:bg-yellow h-[30px]",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[l,"Auto"===l&&(0,t.jsx)(q,{})]}),o?(0,t.jsx)(O,{className:"w-4 h-4"}):(0,t.jsx)(W,{className:"w-4 h-4"})]})]})},U=function(e){var s=e.onChange,r=(0,n.useState)(!1),o=r[0],a=r[1],i=(0,n.useState)("Length"),l=i[0],c=i[1];return(0,t.jsxs)("div",{className:"relative h-[30px]",children:[o&&(0,t.jsx)("div",{className:"absolute z-10 mt-2 w-full bottom-[35px] bg-white border rounded-md shadow-lg",children:["Short","Medium","Long"].map((function(e,n){return(0,t.jsx)("div",{className:"py-1 px-2 cursor-pointer hover:bg-yellow text-gray-700",onClick:function(){return function(e){c(e),s(e),a(!1)}(e)},children:e},n)}))}),(0,t.jsxs)("button",{onClick:function(){a(!o)},className:"flex items-center justify-between w-[90px] p-1 border rounded-md text-gray-700 bg-yellow hover:bg-yellow h-[30px]",children:[(0,t.jsx)("span",{children:l}),o?(0,t.jsx)(O,{className:"w-4 h-4"}):(0,t.jsx)(W,{className:"w-4 h-4"})]})]})},V="4.67.1";let H,z,J,Y,G,K,Z,Q,ee,te=!1,ne=null,se=null,re=null,oe=null;class ae{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}H||function(e,t={auto:!1}){if(te)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(H)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${H}'\``);te=t.auto,H=e.kind,z=e.fetch,ne=e.Request,se=e.Response,re=e.Headers,J=e.FormData,oe=e.Blob,Y=e.File,G=e.ReadableStream,K=e.getMultipartRequestOptions,Z=e.getDefaultAgent,Q=e.fileFromPath,ee=e.isFsReadStream}(function({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import â€¦ from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,s,r,o;try{n=fetch,s=Request,r=Response,o=Headers}catch(e){throw new Error(`this environment is missing the following Web Fetch API type: ${e.message}. ${t}`)}return{kind:"web",fetch:n,Request:s,Response:r,Headers:o,FormData:"undefined"!=typeof FormData?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:"undefined"!=typeof Blob?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:"undefined"!=typeof File?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new ae(e)}),getDefaultAgent:e=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0});class ie{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;return new ie((async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let s=!1;try{for await(const n of async function*(e,t){if(!e.body)throw t.abort(),new Ge("Attempted to iterate over a response with no body");const n=new ce,s=new ue,r=de(e.body);for await(const e of async function*(e){let t=new Uint8Array;for await(const n of e){if(null==n)continue;const e=n instanceof ArrayBuffer?new Uint8Array(n):"string"==typeof n?(new TextEncoder).encode(n):n;let s,r=new Uint8Array(t.length+e.length);for(r.set(t),r.set(e,t.length),t=r;-1!==(s=le(t));)yield t.slice(0,s),t=t.slice(s)}t.length>0&&(yield t)}(r))for(const t of s.decode(e)){const e=n.decode(t);e&&(yield e)}for(const e of s.flush()){const t=n.decode(e);t&&(yield t)}}(e,t))if(!s)if(n.data.startsWith("[DONE]"))s=!0;else if(null===n.event){let e;try{e=JSON.parse(n.data)}catch(e){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),e}if(e&&e.error)throw new Ke(void 0,e.error,void 0,void 0);yield e}else{let e;try{e=JSON.parse(n.data)}catch(e){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),e}if("error"==n.event)throw new Ke(void 0,e.error,e.message,void 0);yield{event:n.event,data:e}}s=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{s||t.abort()}}),t)}static fromReadableStream(e,t){let n=!1;return new ie((async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let s=!1;try{for await(const t of async function*(){const t=new ue,n=de(e);for await(const e of n)for(const n of t.decode(e))yield n;for(const e of t.flush())yield e}())s||t&&(yield JSON.parse(t));s=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{s||t.abort()}}),t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),s=s=>({next:()=>{if(0===s.length){const s=n.next();e.push(s),t.push(s)}return s.shift()}});return[new ie((()=>s(e)),this.controller),new ie((()=>s(t)),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new G({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:s,done:r}=await t.next();if(r)return e.close();const o=n.encode(JSON.stringify(s)+"\n");e.enqueue(o)}catch(t){e.error(t)}},async cancel(){await(t.return?.())}})}}function le(e){for(let t=0;t<e.length-2;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}class ce{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,s]=function(e){const t=e.indexOf(":");return-1!==t?[e.substring(0,t),":",e.substring(t+1)]:[e,"",""]}(e);return s.startsWith(" ")&&(s=s.substring(1)),"event"===t?this.event=s:"data"===t&&this.data.push(s),null}}class ue{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const n=ue.NEWLINE_CHARS.has(t[t.length-1]||"");let s=t.split(ue.NEWLINE_REGEXP);return n&&s.pop(),1!==s.length||n?(this.buffer.length>0&&(s=[this.buffer.join("")+s[0],...s.slice(1)],this.buffer=[]),n||(this.buffer=[s.pop()||""]),s):(this.buffer.push(s[0]),[])}decodeText(e){if(null==e)return"";if("string"==typeof e)return e;if("undefined"!=typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Ge(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Ge(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Ge("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}function de(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}ue.NEWLINE_CHARS=new Set(["\n","\r"]),ue.NEWLINE_REGEXP=/\r\n|[\n\r]/g;const he=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,fe=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&pe(e),pe=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function me(e,t,n){if(e=await e,fe(e))return e;if(he(e)){const s=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const r=pe(s)?[await s.arrayBuffer()]:[s];return new Y(r,t,n)}const s=await async function(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(pe(e))t.push(await e.arrayBuffer());else{if(!ye(e))throw new Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${function(e){return`[${Object.getOwnPropertyNames(e).map((e=>`"${e}"`)).join(", ")}]`}(e)}`);for await(const n of e)t.push(n)}return t}(e);if(t||(t=function(e){return ge(e.name)||ge(e.filename)||ge(e.path)?.split(/[\\/]/).pop()}(e)??"unknown_file"),!n?.type){const e=s[0]?.type;"string"==typeof e&&(n={...n,type:e})}return new Y(s,t,n)}const ge=e=>"string"==typeof e?e:"undefined"!=typeof Buffer&&e instanceof Buffer?String(e):void 0,ye=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],we=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],be=async e=>{const t=await ve(e.body);return K(t,e)},ve=async e=>{const t=new J;return await Promise.all(Object.entries(e||{}).map((([e,n])=>xe(t,e,n)))),t},xe=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)e.append(t,String(n));else if((e=>fe(e)||he(e)||ee(e))(n)){const s=await me(n);e.append(t,s)}else if(Array.isArray(n))await Promise.all(n.map((n=>xe(e,t+"[]",n))));else{if("object"!=typeof n)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`);await Promise.all(Object.entries(n).map((([n,s])=>xe(e,`${t}[${n}]`,s))))}}};var _e;async function Se(e){const{response:t}=e;if(e.options.stream)return He("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):ie.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type");if(n?.includes("application/json")||n?.includes("application/vnd.api+json")){const e=await t.json();return He("response",t.status,t.url,t.headers,e),je(e,t)}const s=await t.text();return He("response",t.status,t.url,t.headers,s),s}function je(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class Oe extends Promise{constructor(e,t=Se){super((e=>{e(null)})),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new Oe(this.responsePromise,(async t=>je(e(await this.parseResponse(t)),t.response)))}asResponse(){return this.responsePromise.then((e=>e.response))}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Pe{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:s,fetch:r}){this.baseURL=e,this.maxRetries=We("maxRetries",t),this.timeout=We("timeout",n),this.httpAgent=s,this.fetch=r??z}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Ie(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${ze()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then((async n=>{const s=n&&pe(n?.body)?new DataView(await n.body.arrayBuffer()):n?.body instanceof DataView?n.body:n?.body instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(n?.body)?new DataView(n.body.buffer):n?.body;return{method:e,path:t,...n,body:s}})))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if("string"==typeof e){if("undefined"!=typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){const{method:n,path:s,query:r,headers:o={}}=e,a=ArrayBuffer.isView(e.body)||e.__binaryRequest&&"string"==typeof e.body?e.body:we(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,i=this.calculateContentLength(a),l=this.buildURL(s,r);"timeout"in e&&We("timeout",e.timeout);const c=e.timeout??this.timeout,u=e.httpAgent??this.httpAgent??Z(l),d=c+1e3;return"number"==typeof u?.options?.timeout&&d>(u.options.timeout??0)&&(u.options.timeout=d),this.idempotencyHeader&&"get"!==n&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey),{req:{method:n,...a&&{body:a},headers:this.buildHeaders({options:e,headers:o,contentLength:i,retryCount:t}),...u&&{agent:u},signal:e.signal??null},url:l,timeout:c}}buildHeaders({options:e,headers:t,contentLength:n,retryCount:s}){const r={};return n&&(r["content-length"]=n),Ve(r,this.defaultHeaders(e)),Ve(r,t),we(e.body)&&"node"!==H&&delete r["content-type"],void 0===Je(t,"x-stainless-retry-count")&&(r["x-stainless-retry-count"]=String(s)),this.validateHeaders(r,t),r}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map((e=>[...e]))):{...e}:{}}makeStatusError(e,t,n,s){return Ke.generate(e,t,n,s)}request(e,t=null){return new Oe(this.makeRequest(e,t))}async makeRequest(e,t){const n=await e,s=n.maxRetries??this.maxRetries;null==t&&(t=s),await this.prepareOptions(n);const{req:r,url:o,timeout:a}=this.buildRequest(n,{retryCount:s-t});if(await this.prepareRequest(r,{url:o,options:n}),He("request",o,n,r.headers),n.signal?.aborted)throw new Ze;const i=new AbortController,l=await this.fetchWithTimeout(o,r,a,i).catch(Fe);if(l instanceof Error){if(n.signal?.aborted)throw new Ze;if(t)return this.retryRequest(n,t);if("AbortError"===l.name)throw new et;throw new Qe({cause:l})}const c=Ae(l.headers);if(!l.ok){if(t&&this.shouldRetry(l))return He(`response (error; retrying, ${t} attempts remaining)`,l.status,o,c),this.retryRequest(n,t,c);const e=await l.text().catch((e=>Fe(e).message)),s=Te(e),r=s?void 0:e;throw He(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,l.status,o,c,r),this.makeStatusError(l.status,s,r,c)}return{response:l,options:n,controller:i}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new Ee(this,n,e)}buildURL(e,t){const n=Le(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return Xe(s)||(t={...s,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter((([e,t])=>void 0!==t)).map((([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new Ge(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)})).join("&")}async fetchWithTimeout(e,t,n,s){const{signal:r,...o}=t||{};r&&r.addEventListener("abort",(()=>s.abort()));const a=setTimeout((()=>s.abort()),n);return this.getRequestClient().fetch.call(void 0,e,{signal:s.signal,...o}).finally((()=>{clearTimeout(a)}))}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,n){let s;const r=n?.["retry-after-ms"];if(r){const e=parseFloat(r);Number.isNaN(e)||(s=e)}const o=n?.["retry-after"];if(o&&!s){const e=parseFloat(o);s=Number.isNaN(e)?Date.parse(o)-Date.now():1e3*e}if(!(s&&0<=s&&s<6e4)){const n=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(t,n)}return await Be(s),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${V}`}}class Ce{constructor(e,t,n,s){_e.set(this,void 0),function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===s?r.call(e,n):r?r.value=n:t.set(e,n)}(this,_e,e,"f"),this.options=s,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Ge("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&"object"==typeof t.query)t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,s]of n)e.url.searchParams.set(t,s);t.query=void 0,t.path=e.url.toString()}return await function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)}(this,_e,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(_e=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class Ee extends Oe{constructor(e,t,n){super(t,(async t=>new n(e,t.response,await Se(t),t.options)))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}const Ae=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),ke={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Re=e=>"object"==typeof e&&null!==e&&!Xe(e)&&Object.keys(e).every((e=>Ue(ke,e))),Ne=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",De=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let Me;const Ie=()=>Me??(Me=(()=>{if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":V,"X-Stainless-OS":De(Deno.build.os),"X-Stainless-Arch":Ne(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":V,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":V,"X-Stainless-OS":De(process.platform),"X-Stainless-Arch":Ne(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e)return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":V,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":V,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),Te=e=>{try{return JSON.parse(e)}catch(e){return}},$e=new RegExp("^(?:[a-z]+:)?//","i"),Le=e=>$e.test(e),Be=e=>new Promise((t=>setTimeout(t,e))),We=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new Ge(`${e} must be an integer`);if(t<0)throw new Ge(`${e} must be a positive integer`);return t},Fe=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},qe=e=>"undefined"!=typeof process?"MISSING_ENV_VAR"?.[e]?.trim()??void 0:"undefined"!=typeof Deno?Deno.env?.get?.(e)?.trim():void 0;function Xe(e){if(!e)return!0;for(const t in e)return!1;return!0}function Ue(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ve(e,t){for(const n in t){if(!Ue(t,n))continue;const s=n.toLowerCase();if(!s)continue;const r=t[n];null===r?delete e[s]:void 0!==r&&(e[s]=r)}}function He(e,...t){"undefined"!=typeof process&&"true"==="MISSING_ENV_VAR"?.DEBUG&&console.log(`OpenAI:DEBUG:${e}`,...t)}const ze=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),Je=(e,t)=>{const n=t.toLowerCase();if((e=>"function"==typeof e?.get)(e)){const s=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,((e,t,n)=>t+n.toUpperCase()));for(const r of[t,n,t.toUpperCase(),s]){const t=e.get(r);if(t)return t}}for(const[s,r]of Object.entries(e))if(s.toLowerCase()===n)return Array.isArray(r)?(r.length<=1||console.warn(`Received ${r.length} entries for the ${t} header, using the first entry.`),r[0]):r};function Ye(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}class Ge extends Error{}class Ke extends Ge{constructor(e,t,n,s){super(`${Ke.makeMessage(e,t,n)}`),this.status=e,this.headers=s,this.request_id=s?.["x-request-id"];const r=t;this.error=r,this.code=r?.code,this.param=r?.param,this.type=r?.type}static makeMessage(e,t,n){const s=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,n,s){if(!e)return new Qe({message:n,cause:Fe(t)});const r=t?.error;return 400===e?new tt(e,r,n,s):401===e?new nt(e,r,n,s):403===e?new st(e,r,n,s):404===e?new rt(e,r,n,s):409===e?new ot(e,r,n,s):422===e?new at(e,r,n,s):429===e?new it(e,r,n,s):e>=500?new lt(e,r,n,s):new Ke(e,r,n,s)}}class Ze extends Ke{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class Qe extends Ke{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class et extends Qe{constructor({message:e}={}){super({message:e??"Request timed out."})}}class tt extends Ke{constructor(){super(...arguments),this.status=400}}class nt extends Ke{constructor(){super(...arguments),this.status=401}}class st extends Ke{constructor(){super(...arguments),this.status=403}}class rt extends Ke{constructor(){super(...arguments),this.status=404}}class ot extends Ke{constructor(){super(...arguments),this.status=409}}class at extends Ke{constructor(){super(...arguments),this.status=422}}class it extends Ke{constructor(){super(...arguments),this.status=429}}class lt extends Ke{}class ct extends Ge{constructor(){super("Could not parse response content as the length limit was reached")}}class ut extends Ge{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}const dt="RFC3986",ht={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},ft=(Object.prototype.hasOwnProperty,Array.isArray),pt=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),mt=1024;function gt(e,t){if(ft(e)){const n=[];for(let s=0;s<e.length;s+=1)n.push(t(e[s]));return n}return t(e)}const yt=Object.prototype.hasOwnProperty,wt={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},bt=Array.isArray,vt=Array.prototype.push,xt=function(e,t){vt.apply(e,bt(t)?t:[t])},_t=Date.prototype.toISOString,St={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(e,t,n,s,r)=>{if(0===e.length)return e;let o=e;if("symbol"==typeof e?o=Symbol.prototype.toString.call(e):"string"!=typeof e&&(o=String(e)),"iso-8859-1"===n)return escape(o).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));let a="";for(let e=0;e<o.length;e+=mt){const t=o.length>=mt?o.slice(e,e+mt):o,n=[];for(let e=0;e<t.length;++e){let s=t.charCodeAt(e);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||"RFC1738"===r&&(40===s||41===s)?n[n.length]=t.charAt(e):s<128?n[n.length]=pt[s]:s<2048?n[n.length]=pt[192|s>>6]+pt[128|63&s]:s<55296||s>=57344?n[n.length]=pt[224|s>>12]+pt[128|s>>6&63]+pt[128|63&s]:(e+=1,s=65536+((1023&s)<<10|1023&t.charCodeAt(e)),n[n.length]=pt[240|s>>18]+pt[128|s>>12&63]+pt[128|s>>6&63]+pt[128|63&s])}a+=n.join("")}return a},encodeValuesOnly:!1,format:dt,formatter:ht[dt],indices:!1,serializeDate:e=>_t.call(e),skipNulls:!1,strictNullHandling:!1},jt={};function Ot(e,t,n,s,r,o,a,i,l,c,u,d,h,f,p,m,g,y){let w=e,b=y,v=0,x=!1;for(;void 0!==(b=b.get(jt))&&!x;){const t=b.get(e);if(v+=1,void 0!==t){if(t===v)throw new RangeError("Cyclic object value");x=!0}void 0===b.get(jt)&&(v=0)}if("function"==typeof c?w=c(t,w):w instanceof Date?w=h?.(w):"comma"===n&&bt(w)&&(w=gt(w,(function(e){return e instanceof Date?h?.(e):e}))),null===w){if(o)return l&&!m?l(t,St.encoder,g,"key",f):t;w=""}if("string"==typeof(_=w)||"number"==typeof _||"boolean"==typeof _||"symbol"==typeof _||"bigint"==typeof _||function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))}(w)){if(l){const e=m?t:l(t,St.encoder,g,"key",f);return[p?.(e)+"="+p?.(l(w,St.encoder,g,"value",f))]}return[p?.(t)+"="+p?.(String(w))]}var _;const S=[];if(void 0===w)return S;let j;if("comma"===n&&bt(w))m&&l&&(w=gt(w,l)),j=[{value:w.length>0?w.join(",")||null:void 0}];else if(bt(c))j=c;else{const e=Object.keys(w);j=u?e.sort(u):e}const O=i?String(t).replace(/\./g,"%2E"):String(t),P=s&&bt(w)&&1===w.length?O+"[]":O;if(r&&bt(w)&&0===w.length)return P+"[]";for(let t=0;t<j.length;++t){const b=j[t],x="object"==typeof b&&void 0!==b.value?b.value:w[b];if(a&&null===x)continue;const _=d&&i?b.replace(/\./g,"%2E"):b,O=bt(w)?"function"==typeof n?n(P,_):P:P+(d?"."+_:"["+_+"]");y.set(e,v);const C=new WeakMap;C.set(jt,y),xt(S,Ot(x,O,n,s,r,o,a,i,"comma"===n&&m&&bt(w)?null:l,c,u,d,h,f,p,m,g,C))}return S}class Pt extends Ce{constructor(e,t,n,s){super(e,t,n,s),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Ct extends Ce{constructor(e,t,n,s){super(e,t,n,s),this.data=n.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}class Et{constructor(e){this._client=e}}class At extends Et{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}At||(At={});class kt extends Et{create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}}kt||(kt={});class Rt extends Et{constructor(){super(...arguments),this.completions=new kt(this._client)}}!function(e){e.Completions=kt}(Rt||(Rt={}));class Nt extends Et{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}Nt||(Nt={});class Dt extends Et{create(e,t){return this._client.post("/files",be({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return Re(e)?this.list({},e):this._client.getAPIList("/files",Mt,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...t?.headers}})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=18e5}={}){const s=new Set(["processed","error","deleted"]),r=Date.now();let o=await this.retrieve(e);for(;!o.status||!s.has(o.status);)if(await Be(t),o=await this.retrieve(e),Date.now()-r>n)throw new et({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return o}}class Mt extends Pt{}!function(e){e.FileObjectsPage=Mt}(Dt||(Dt={}));class It extends Et{createVariation(e,t){return this._client.post("/images/variations",be({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",be({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}It||(It={});class Tt extends Et{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}Tt||(Tt={});class $t extends Et{create(e,t){return this._client.post("/audio/transcriptions",be({body:e,...t}))}}$t||($t={});class Lt extends Et{create(e,t){return this._client.post("/audio/translations",be({body:e,...t}))}}Lt||(Lt={});class Bt extends Et{constructor(){super(...arguments),this.transcriptions=new $t(this._client),this.translations=new Lt(this._client),this.speech=new Tt(this._client)}}!function(e){e.Transcriptions=$t,e.Translations=Lt,e.Speech=Tt}(Bt||(Bt={}));class Wt extends Et{create(e,t){return this._client.post("/moderations",{body:e,...t})}}Wt||(Wt={});class Ft extends Et{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",qt,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class qt extends Pt{}!function(e){e.ModelsPage=qt}(Ft||(Ft={}));class Xt extends Et{list(e,t={},n){return Re(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Ut,{query:t,...n})}}class Ut extends Ct{}!function(e){e.FineTuningJobCheckpointsPage=Ut}(Xt||(Xt={}));class Vt extends Et{constructor(){super(...arguments),this.checkpoints=new Xt(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return Re(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Ht,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return Re(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,zt,{query:t,...n})}}class Ht extends Ct{}class zt extends Ct{}!function(e){e.FineTuningJobsPage=Ht,e.FineTuningJobEventsPage=zt,e.Checkpoints=Xt,e.FineTuningJobCheckpointsPage=Ut}(Vt||(Vt={}));class Jt extends Et{constructor(){super(...arguments),this.jobs=new Vt(this._client)}}!function(e){e.Jobs=Vt,e.FineTuningJobsPage=Ht,e.FineTuningJobEventsPage=zt}(Jt||(Jt={}));class Yt extends Et{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e={},t){return Re(e)?this.list({},e):this._client.getAPIList("/assistants",Gt,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class Gt extends Ct{}function Kt(e){return"function"==typeof e.parse}!function(e){e.AssistantsPage=Gt}(Yt||(Yt={}));const Zt=e=>"assistant"===e?.role,Qt=e=>"function"===e?.role,en=e=>"tool"===e?.role;var tn,nn,sn,rn,on,an,ln,cn,un,dn,hn,fn,pn,mn=function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},gn=function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};class yn{constructor(){tn.add(this),this.controller=new AbortController,nn.set(this,void 0),sn.set(this,(()=>{})),rn.set(this,(()=>{})),on.set(this,void 0),an.set(this,(()=>{})),ln.set(this,(()=>{})),cn.set(this,{}),un.set(this,!1),dn.set(this,!1),hn.set(this,!1),fn.set(this,!1),mn(this,nn,new Promise(((e,t)=>{mn(this,sn,e,"f"),mn(this,rn,t,"f")})),"f"),mn(this,on,new Promise(((e,t)=>{mn(this,an,e,"f"),mn(this,ln,t,"f")})),"f"),gn(this,nn,"f").catch((()=>{})),gn(this,on,"f").catch((()=>{}))}_run(e){setTimeout((()=>{e().then((()=>{this._emitFinal(),this._emit("end")}),gn(this,tn,"m",pn).bind(this))}),0)}_connected(){this.ended||(gn(this,sn,"f").call(this),this._emit("connect"))}get ended(){return gn(this,un,"f")}get errored(){return gn(this,dn,"f")}get aborted(){return gn(this,hn,"f")}abort(){this.controller.abort()}on(e,t){return(gn(this,cn,"f")[e]||(gn(this,cn,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=gn(this,cn,"f")[e];if(!n)return this;const s=n.findIndex((e=>e.listener===t));return s>=0&&n.splice(s,1),this}once(e,t){return(gn(this,cn,"f")[e]||(gn(this,cn,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise(((t,n)=>{mn(this,fn,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)}))}async done(){mn(this,fn,!0,"f"),await gn(this,on,"f")}_emit(e,...t){if(gn(this,un,"f"))return;"end"===e&&(mn(this,un,!0,"f"),gn(this,an,"f").call(this));const n=gn(this,cn,"f")[e];if(n&&(gn(this,cn,"f")[e]=n.filter((e=>!e.once)),n.forEach((({listener:e})=>e(...t)))),"abort"===e){const e=t[0];return gn(this,fn,"f")||n?.length||Promise.reject(e),gn(this,rn,"f").call(this,e),gn(this,ln,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];gn(this,fn,"f")||n?.length||Promise.reject(e),gn(this,rn,"f").call(this,e),gn(this,ln,"f").call(this,e),this._emit("end")}}_emitFinal(){}}function wn(e){return"auto-parseable-response-format"===e?.$brand}function bn(e){return"auto-parseable-tool"===e?.$brand}function vn(e,t){const n=e.choices.map((e=>{if("length"===e.finish_reason)throw new ct;if("content_filter"===e.finish_reason)throw new ut;return{...e,message:{...e.message,tool_calls:e.message.tool_calls?.map((e=>function(e,t){const n=e.tools?.find((e=>e.function?.name===t.function.name));return{...t,function:{...t.function,parsed_arguments:bn(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}(t,e)))??[],parsed:e.message.content&&!e.message.refusal?xn(t,e.message.content):null}}}));return{...e,choices:n}}function xn(e,t){return"json_schema"!==e.response_format?.type?null:"json_schema"===e.response_format?.type?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function _n(e,t){if(!e)return!1;const n=e.tools?.find((e=>e.function?.name===t.function.name));return bn(n)||n?.function.strict||!1}function Sn(e){return!!wn(e.response_format)||(e.tools?.some((e=>bn(e)||"function"===e.type&&!0===e.function.strict))??!1)}nn=new WeakMap,sn=new WeakMap,rn=new WeakMap,on=new WeakMap,an=new WeakMap,ln=new WeakMap,cn=new WeakMap,un=new WeakMap,dn=new WeakMap,hn=new WeakMap,fn=new WeakMap,tn=new WeakSet,pn=function(e){if(mn(this,dn,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new Ze),e instanceof Ze)return mn(this,hn,!0,"f"),this._emit("abort",e);if(e instanceof Ge)return this._emit("error",e);if(e instanceof Error){const t=new Ge(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Ge(String(e)))};var jn,On,Pn,Cn,En,An,kn,Rn,Nn=function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};const Dn=10;class Mn extends yn{constructor(){super(...arguments),jn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),(Qt(e)||en(e))&&e.content)this._emit("functionCallResult",e.content);else if(Zt(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Zt(e)&&e.tool_calls)for(const t of e.tool_calls)"function"===t.type&&this._emit("functionCall",t.function)}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ge("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Nn(this,jn,"m",On).call(this)}async finalMessage(){return await this.done(),Nn(this,jn,"m",Pn).call(this)}async finalFunctionCall(){return await this.done(),Nn(this,jn,"m",Cn).call(this)}async finalFunctionCallResult(){return await this.done(),Nn(this,jn,"m",En).call(this)}async totalUsage(){return await this.done(),Nn(this,jn,"m",An).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=Nn(this,jn,"m",Pn).call(this);t&&this._emit("finalMessage",t);const n=Nn(this,jn,"m",On).call(this);n&&this._emit("finalContent",n);const s=Nn(this,jn,"m",Cn).call(this);s&&this._emit("finalFunctionCall",s);const r=Nn(this,jn,"m",En).call(this);null!=r&&this._emit("finalFunctionCallResult",r),this._chatCompletions.some((e=>e.usage))&&this._emit("totalUsage",Nn(this,jn,"m",An).call(this))}async _createChatCompletion(e,t,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",(()=>this.controller.abort()))),Nn(this,jn,"m",kn).call(this,t);const r=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(vn(r,t))}async _runChatCompletion(e,t,n){for(const e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){const s="function",{function_call:r="auto",stream:o,...a}=t,i="string"!=typeof r&&r?.name,{maxChatCompletions:l=Dn}=n||{},c={};for(const e of t.functions)c[e.name||e.function.name]=e;const u=t.functions.map((e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description})));for(const e of t.messages)this._addMessage(e,!1);for(let t=0;t<l;++t){const t=await this._createChatCompletion(e,{...a,function_call:r,functions:u,messages:[...this.messages]},n),o=t.choices[0]?.message;if(!o)throw new Ge("missing message in ChatCompletion response");if(!o.function_call)return;const{name:l,arguments:d}=o.function_call,h=c[l];if(!h){const e=`Invalid function_call: ${JSON.stringify(l)}. Available options are: ${u.map((e=>JSON.stringify(e.name))).join(", ")}. Please try again`;this._addMessage({role:s,name:l,content:e});continue}if(i&&i!==l){const e=`Invalid function_call: ${JSON.stringify(l)}. ${JSON.stringify(i)} requested. Please try again`;this._addMessage({role:s,name:l,content:e});continue}let f;try{f=Kt(h)?await h.parse(d):d}catch(e){this._addMessage({role:s,name:l,content:e instanceof Error?e.message:String(e)});continue}const p=await h.function(f,this),m=Nn(this,jn,"m",Rn).call(this,p);if(this._addMessage({role:s,name:l,content:m}),i)return}}async _runTools(e,t,n){const s="tool",{tool_choice:r="auto",stream:o,...a}=t,i="string"!=typeof r&&r?.function?.name,{maxChatCompletions:l=Dn}=n||{},c=t.tools.map((e=>{if(bn(e)){if(!e.$callback)throw new Ge("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e})),u={};for(const e of c)"function"===e.type&&(u[e.function.name||e.function.function.name]=e.function);const d="tools"in t?c.map((e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e)):void 0;for(const e of t.messages)this._addMessage(e,!1);for(let t=0;t<l;++t){const t=await this._createChatCompletion(e,{...a,tool_choice:r,tools:d,messages:[...this.messages]},n),o=t.choices[0]?.message;if(!o)throw new Ge("missing message in ChatCompletion response");if(!o.tool_calls?.length)return;for(const e of o.tool_calls){if("function"!==e.type)continue;const t=e.id,{name:n,arguments:r}=e.function,o=u[n];if(!o){const e=`Invalid tool_call: ${JSON.stringify(n)}. Available options are: ${Object.keys(u).map((e=>JSON.stringify(e))).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:t,content:e});continue}if(i&&i!==n){const e=`Invalid tool_call: ${JSON.stringify(n)}. ${JSON.stringify(i)} requested. Please try again`;this._addMessage({role:s,tool_call_id:t,content:e});continue}let a;try{a=Kt(o)?await o.parse(r):r}catch(e){const n=e instanceof Error?e.message:String(e);this._addMessage({role:s,tool_call_id:t,content:n});continue}const l=await o.function(a,this),c=Nn(this,jn,"m",Rn).call(this,l);if(this._addMessage({role:s,tool_call_id:t,content:c}),i)return}}}}jn=new WeakSet,On=function(){return Nn(this,jn,"m",Pn).call(this).content??null},Pn=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(Zt(t)){const{function_call:e,...n}=t,s={...n,content:t.content??null,refusal:t.refusal??null};return e&&(s.function_call=e),s}}throw new Ge("stream ended without producing a ChatCompletionMessage with role=assistant")},Cn=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Zt(t)&&t?.function_call)return t.function_call;if(Zt(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},En=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Qt(t)&&null!=t.content)return t.content;if(en(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some((e=>"assistant"===e.role&&e.tool_calls?.some((e=>"function"===e.type&&e.id===t.tool_call_id)))))return t.content}},An=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},kn=function(e){if(null!=e.n&&e.n>1)throw new Ge("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Rn=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class In extends Mn{static runFunctions(e,t,n){const s=new In,r={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run((()=>s._runFunctions(e,t,r))),s}static runTools(e,t,n){const s=new In,r={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run((()=>s._runTools(e,t,r))),s}_addMessage(e,t=!0){super._addMessage(e,t),Zt(e)&&e.content&&this._emit("content",e.content)}}class Tn extends Error{}class $n extends Error{}const Ln=e=>function(e,t=511){if("string"!=typeof e)throw new TypeError("expecting str, got "+typeof e);if(!e.trim())throw new Error(`${e} is empty`);return((e,t)=>{const n=e.length;let s=0;const r=e=>{throw new Tn(`${e} at position ${s}`)},o=e=>{throw new $n(`${e} at position ${s}`)},a=()=>(d(),s>=n&&r("Unexpected end of input"),'"'===e[s]?i():"{"===e[s]?l():"["===e[s]?c():"null"===e.substring(s,s+4)||16&t&&n-s<4&&"null".startsWith(e.substring(s))?(s+=4,null):"true"===e.substring(s,s+4)||32&t&&n-s<4&&"true".startsWith(e.substring(s))?(s+=4,!0):"false"===e.substring(s,s+5)||32&t&&n-s<5&&"false".startsWith(e.substring(s))?(s+=5,!1):"Infinity"===e.substring(s,s+8)||128&t&&n-s<8&&"Infinity".startsWith(e.substring(s))?(s+=8,1/0):"-Infinity"===e.substring(s,s+9)||256&t&&1<n-s&&n-s<9&&"-Infinity".startsWith(e.substring(s))?(s+=9,-1/0):"NaN"===e.substring(s,s+3)||64&t&&n-s<3&&"NaN".startsWith(e.substring(s))?(s+=3,NaN):u()),i=()=>{const a=s;let i=!1;for(s++;s<n&&('"'!==e[s]||i&&"\\"===e[s-1]);)i="\\"===e[s]&&!i,s++;if('"'==e.charAt(s))try{return JSON.parse(e.substring(a,++s-Number(i)))}catch(e){o(String(e))}else if(1&t)try{return JSON.parse(e.substring(a,s-Number(i))+'"')}catch(t){return JSON.parse(e.substring(a,e.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},l=()=>{s++,d();const o={};try{for(;"}"!==e[s];){if(d(),s>=n&&8&t)return o;const r=i();d(),s++;try{const e=a();Object.defineProperty(o,r,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(e){if(8&t)return o;throw e}d(),","===e[s]&&s++}}catch(e){if(8&t)return o;r("Expected '}' at end of object")}return s++,o},c=()=>{s++;const n=[];try{for(;"]"!==e[s];)n.push(a()),d(),","===e[s]&&s++}catch(e){if(4&t)return n;r("Expected ']' at end of array")}return s++,n},u=()=>{if(0===s){"-"===e&&2&t&&r("Not sure what '-' is");try{return JSON.parse(e)}catch(n){if(2&t)try{return"."===e[e.length-1]?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(e){}o(String(n))}}const a=s;for("-"===e[s]&&s++;e[s]&&!",]}".includes(e[s]);)s++;s!=n||2&t||r("Unterminated number literal");try{return JSON.parse(e.substring(a,s))}catch(n){"-"===e.substring(a,s)&&2&t&&r("Not sure what '-' is");try{return JSON.parse(e.substring(a,e.lastIndexOf("e")))}catch(e){o(String(e))}}},d=()=>{for(;s<n&&" \n\r\t".includes(e[s]);)s++};return a()})(e.trim(),t)}(e,509);var Bn,Wn,Fn,qn,Xn,Un,Vn,Hn,zn,Jn,Yn,Gn,Kn=function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n},Zn=function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)};class Qn extends Mn{constructor(e){super(),Bn.add(this),Wn.set(this,void 0),Fn.set(this,void 0),qn.set(this,void 0),Kn(this,Wn,e,"f"),Kn(this,Fn,[],"f")}get currentChatCompletionSnapshot(){return Zn(this,qn,"f")}static fromReadableStream(e){const t=new Qn(null);return t._run((()=>t._fromReadableStream(e))),t}static createChatCompletion(e,t,n){const s=new Qn(t);return s._run((()=>s._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}}))),s}async _createChatCompletion(e,t,n){super._createChatCompletion;const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",(()=>this.controller.abort()))),Zn(this,Bn,"m",Xn).call(this);const r=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const e of r)Zn(this,Bn,"m",Vn).call(this,e);if(r.controller.signal?.aborted)throw new Ze;return this._addChatCompletion(Zn(this,Bn,"m",Jn).call(this))}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",(()=>this.controller.abort()))),Zn(this,Bn,"m",Xn).call(this),this._connected();const s=ie.fromReadableStream(e,this.controller);let r;for await(const e of s)r&&r!==e.id&&this._addChatCompletion(Zn(this,Bn,"m",Jn).call(this)),Zn(this,Bn,"m",Vn).call(this,e),r=e.id;if(s.controller.signal?.aborted)throw new Ze;return this._addChatCompletion(Zn(this,Bn,"m",Jn).call(this))}[(Wn=new WeakMap,Fn=new WeakMap,qn=new WeakMap,Bn=new WeakSet,Xn=function(){this.ended||Kn(this,qn,void 0,"f")},Un=function(e){let t=Zn(this,Fn,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Zn(this,Fn,"f")[e.index]=t,t)},Vn=function(e){if(this.ended)return;const t=Zn(this,Bn,"m",Gn).call(this,e);this._emit("chunk",e,t);for(const n of e.choices){const e=t.choices[n.index];null!=n.delta.content&&"assistant"===e.message?.role&&e.message?.content&&(this._emit("content",n.delta.content,e.message.content),this._emit("content.delta",{delta:n.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=n.delta.refusal&&"assistant"===e.message?.role&&e.message?.refusal&&this._emit("refusal.delta",{delta:n.delta.refusal,snapshot:e.message.refusal}),null!=n.logprobs?.content&&"assistant"===e.message?.role&&this._emit("logprobs.content.delta",{content:n.logprobs?.content,snapshot:e.logprobs?.content??[]}),null!=n.logprobs?.refusal&&"assistant"===e.message?.role&&this._emit("logprobs.refusal.delta",{refusal:n.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});const s=Zn(this,Bn,"m",Un).call(this,e);e.finish_reason&&(Zn(this,Bn,"m",zn).call(this,e),null!=s.current_tool_call_index&&Zn(this,Bn,"m",Hn).call(this,e,s.current_tool_call_index));for(const t of n.delta.tool_calls??[])s.current_tool_call_index!==t.index&&(Zn(this,Bn,"m",zn).call(this,e),null!=s.current_tool_call_index&&Zn(this,Bn,"m",Hn).call(this,e,s.current_tool_call_index)),s.current_tool_call_index=t.index;for(const t of n.delta.tool_calls??[]){const n=e.message.tool_calls?.[t.index];n?.type&&"function"===n?.type&&this._emit("tool_calls.function.arguments.delta",{name:n.function?.name,index:t.index,arguments:n.function.arguments,parsed_arguments:n.function.parsed_arguments,arguments_delta:t.function?.arguments??""})}}},Hn=function(e,t){if(Zn(this,Bn,"m",Un).call(this,e).done_tool_calls.has(t))return;const n=e.message.tool_calls?.[t];if(!n)throw new Error("no tool call snapshot");if(!n.type)throw new Error("tool call snapshot missing `type`");if("function"===n.type){const e=Zn(this,Wn,"f")?.tools?.find((e=>"function"===e.type&&e.function.name===n.function.name));this._emit("tool_calls.function.arguments.done",{name:n.function.name,index:t,arguments:n.function.arguments,parsed_arguments:bn(e)?e.$parseRaw(n.function.arguments):e?.function.strict?JSON.parse(n.function.arguments):null})}else n.type},zn=function(e){const t=Zn(this,Bn,"m",Un).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;const n=Zn(this,Bn,"m",Yn).call(this);this._emit("content.done",{content:e.message.content,parsed:n?n.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},Jn=function(){if(this.ended)throw new Ge("stream has ended, this shouldn't happen");const e=Zn(this,qn,"f");if(!e)throw new Ge("request ended without sending any chunks");return Kn(this,qn,void 0,"f"),Kn(this,Fn,[],"f"),function(e,t){const{id:n,choices:s,created:r,model:o,system_fingerprint:a,...i}=e,l={...i,id:n,choices:s.map((({message:t,finish_reason:n,index:s,logprobs:r,...o})=>{if(!n)throw new Ge(`missing finish_reason for choice ${s}`);const{content:a=null,function_call:i,tool_calls:l,...c}=t,u=t.role;if(!u)throw new Ge(`missing role for choice ${s}`);if(i){const{arguments:e,name:l}=i;if(null==e)throw new Ge(`missing function_call.arguments for choice ${s}`);if(!l)throw new Ge(`missing function_call.name for choice ${s}`);return{...o,message:{content:a,function_call:{arguments:e,name:l},role:u,refusal:t.refusal??null},finish_reason:n,index:s,logprobs:r}}return l?{...o,index:s,finish_reason:n,logprobs:r,message:{...c,role:u,content:a,refusal:t.refusal??null,tool_calls:l.map(((t,n)=>{const{function:r,type:o,id:a,...i}=t,{arguments:l,name:c,...u}=r||{};if(null==a)throw new Ge(`missing choices[${s}].tool_calls[${n}].id\n${es(e)}`);if(null==o)throw new Ge(`missing choices[${s}].tool_calls[${n}].type\n${es(e)}`);if(null==c)throw new Ge(`missing choices[${s}].tool_calls[${n}].function.name\n${es(e)}`);if(null==l)throw new Ge(`missing choices[${s}].tool_calls[${n}].function.arguments\n${es(e)}`);return{...i,id:a,type:o,function:{...u,name:c,arguments:l}}}))}}:{...o,message:{...c,content:a,role:u,refusal:t.refusal??null},finish_reason:n,index:s,logprobs:r}})),created:r,model:o,object:"chat.completion",...a?{system_fingerprint:a}:{}};return function(e,t){return t&&Sn(t)?vn(e,t):{...e,choices:e.choices.map((e=>({...e,message:{...e.message,parsed:null,tool_calls:e.message.tool_calls??[]}})))}}(l,t)}(e,Zn(this,Wn,"f"))},Yn=function(){const e=Zn(this,Wn,"f")?.response_format;return wn(e)?e:null},Gn=function(e){var t,n,s,r;let o=Zn(this,qn,"f");const{choices:a,...i}=e;o?Object.assign(o,i):o=Kn(this,qn,{...i,choices:[]},"f");for(const{delta:a,finish_reason:i,index:l,logprobs:c=null,...u}of e.choices){let e=o.choices[l];if(e||(e=o.choices[l]={finish_reason:i,index:l,message:{},logprobs:c,...u}),c)if(e.logprobs){const{content:s,refusal:r,...o}=c;Object.assign(e.logprobs,o),s&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...s)),r&&((n=e.logprobs).refusal??(n.refusal=[]),e.logprobs.refusal.push(...r))}else e.logprobs=Object.assign({},c);if(i&&(e.finish_reason=i,Zn(this,Wn,"f")&&Sn(Zn(this,Wn,"f")))){if("length"===i)throw new ct;if("content_filter"===i)throw new ut}if(Object.assign(e,u),!a)continue;const{content:d,refusal:h,function_call:f,role:p,tool_calls:m,...g}=a;if(Object.assign(e.message,g),h&&(e.message.refusal=(e.message.refusal||"")+h),p&&(e.message.role=p),f&&(e.message.function_call?(f.name&&(e.message.function_call.name=f.name),f.arguments&&((s=e.message.function_call).arguments??(s.arguments=""),e.message.function_call.arguments+=f.arguments)):e.message.function_call=f),d&&(e.message.content=(e.message.content||"")+d,!e.message.refusal&&Zn(this,Bn,"m",Yn).call(this)&&(e.message.parsed=Ln(e.message.content))),m){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:n,type:s,function:o,...a}of m){const i=(r=e.message.tool_calls)[t]??(r[t]={});Object.assign(i,a),n&&(i.id=n),s&&(i.type=s),o&&(i.function??(i.function={name:o.name??"",arguments:""})),o?.name&&(i.function.name=o.name),o?.arguments&&(i.function.arguments+=o.arguments,_n(Zn(this,Wn,"f"),i)&&(i.function.parsed_arguments=Ln(i.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",(n=>{const s=t.shift();s?s.resolve(n):e.push(n)})),this.on("end",(()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0})),this.on("abort",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),this.on("error",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise(((e,n)=>t.push({resolve:e,reject:n}))).then((e=>e?{value:e,done:!1}:{value:void 0,done:!0})),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ie(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function es(e){return JSON.stringify(e)}class ts extends Qn{static fromReadableStream(e){const t=new ts(null);return t._run((()=>t._fromReadableStream(e))),t}static runFunctions(e,t,n){const s=new ts(null),r={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run((()=>s._runFunctions(e,t,r))),s}static runTools(e,t,n){const s=new ts(t),r={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run((()=>s._runTools(e,t,r))),s}}class ns extends Et{parse(e,t){return function(e){for(const t of e??[]){if("function"!==t.type)throw new Ge(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new Ge(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap((t=>vn(t,e)))}runFunctions(e,t){return e.stream?ts.runFunctions(this._client,e,t):In.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?ts.runTools(this._client,e,t):In.runTools(this._client,e,t)}stream(e,t){return Qn.createChatCompletion(this._client,e,t)}}class ss extends Et{constructor(){super(...arguments),this.completions=new ns(this._client)}}!function(e){e.Completions=ns}(ss||(ss={}));var rs,os,as,is,ls,cs,us,ds,hs,fs,ps,ms,gs,ys,ws,bs,vs,xs,_s,Ss,js,Os,Ps,Cs=function(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)},Es=function(e,t,n,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,n):r?r.value=n:t.set(e,n),n};class As extends yn{constructor(){super(...arguments),rs.add(this),os.set(this,[]),as.set(this,{}),is.set(this,{}),ls.set(this,void 0),cs.set(this,void 0),us.set(this,void 0),ds.set(this,void 0),hs.set(this,void 0),fs.set(this,void 0),ps.set(this,void 0),ms.set(this,void 0),gs.set(this,void 0)}[(os=new WeakMap,as=new WeakMap,is=new WeakMap,ls=new WeakMap,cs=new WeakMap,us=new WeakMap,ds=new WeakMap,hs=new WeakMap,fs=new WeakMap,ps=new WeakMap,ms=new WeakMap,gs=new WeakMap,rs=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",(n=>{const s=t.shift();s?s.resolve(n):e.push(n)})),this.on("end",(()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0})),this.on("abort",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),this.on("error",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise(((e,n)=>t.push({resolve:e,reject:n}))).then((e=>e?{value:e,done:!1}:{value:void 0,done:!0})),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new As;return t._run((()=>t._fromReadableStream(e))),t}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",(()=>this.controller.abort()))),this._connected();const s=ie.fromReadableStream(e,this.controller);for await(const e of s)Cs(this,rs,"m",ys).call(this,e);if(s.controller.signal?.aborted)throw new Ze;return this._addRun(Cs(this,rs,"m",ws).call(this))}toReadableStream(){return new ie(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,s,r){const o=new As;return o._run((()=>o._runToolAssistantStream(e,t,n,s,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}}))),o}async _createToolAssistantStream(e,t,n,s,r){const o=r?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",(()=>this.controller.abort())));const a={...s,stream:!0},i=await e.submitToolOutputs(t,n,a,{...r,signal:this.controller.signal});this._connected();for await(const e of i)Cs(this,rs,"m",ys).call(this,e);if(i.controller.signal?.aborted)throw new Ze;return this._addRun(Cs(this,rs,"m",ws).call(this))}static createThreadAssistantStream(e,t,n){const s=new As;return s._run((()=>s._threadAssistantStream(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}}))),s}static createAssistantStream(e,t,n,s){const r=new As;return r._run((()=>r._runAssistantStream(e,t,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}}))),r}currentEvent(){return Cs(this,ps,"f")}currentRun(){return Cs(this,ms,"f")}currentMessageSnapshot(){return Cs(this,ls,"f")}currentRunStepSnapshot(){return Cs(this,gs,"f")}async finalRunSteps(){return await this.done(),Object.values(Cs(this,as,"f"))}async finalMessages(){return await this.done(),Object.values(Cs(this,is,"f"))}async finalRun(){if(await this.done(),!Cs(this,cs,"f"))throw Error("Final run was not received.");return Cs(this,cs,"f")}async _createThreadAssistantStream(e,t,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",(()=>this.controller.abort())));const r={...t,stream:!0},o=await e.createAndRun(r,{...n,signal:this.controller.signal});this._connected();for await(const e of o)Cs(this,rs,"m",ys).call(this,e);if(o.controller.signal?.aborted)throw new Ze;return this._addRun(Cs(this,rs,"m",ws).call(this))}async _createAssistantStream(e,t,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort())));const o={...n,stream:!0},a=await e.create(t,o,{...s,signal:this.controller.signal});this._connected();for await(const e of a)Cs(this,rs,"m",ys).call(this,e);if(a.controller.signal?.aborted)throw new Ze;return this._addRun(Cs(this,rs,"m",ws).call(this))}static accumulateDelta(e,t){for(const[n,s]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=s;continue}let t=e[n];if(null!=t)if("index"!==n&&"type"!==n){if("string"==typeof t&&"string"==typeof s)t+=s;else if("number"==typeof t&&"number"==typeof s)t+=s;else{if(!Ye(t)||!Ye(s)){if(Array.isArray(t)&&Array.isArray(s)){if(t.every((e=>"string"==typeof e||"number"==typeof e))){t.push(...s);continue}for(const e of s){if(!Ye(e))throw new Error(`Expected array delta entry to be an object but got: ${e}`);const n=e.index;if(null==n)throw console.error(e),new Error("Expected array delta entry to have an `index` property");if("number"!=typeof n)throw new Error(`Expected array delta entry \`index\` property to be a number but got ${n}`);const s=t[n];null==s?t.push(e):t[n]=this.accumulateDelta(s,e)}continue}throw Error(`Unhandled record type: ${n}, deltaValue: ${s}, accValue: ${t}`)}t=this.accumulateDelta(t,s)}e[n]=t}else e[n]=s;else e[n]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,s){return await this._createAssistantStream(t,e,n,s)}async _runToolAssistantStream(e,t,n,s,r){return await this._createToolAssistantStream(n,e,t,s,r)}}ys=function(e){if(!this.ended)switch(Es(this,ps,e,"f"),Cs(this,rs,"m",xs).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Cs(this,rs,"m",Os).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Cs(this,rs,"m",vs).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Cs(this,rs,"m",bs).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},ws=function(){if(this.ended)throw new Ge("stream has ended, this shouldn't happen");if(!Cs(this,cs,"f"))throw Error("Final run has not been received");return Cs(this,cs,"f")},bs=function(e){const[t,n]=Cs(this,rs,"m",Ss).call(this,e,Cs(this,ls,"f"));Es(this,ls,t,"f"),Cs(this,is,"f")[t.id]=t;for(const e of n){const n=t.content[e.index];"text"==n?.type&&this._emit("textCreated",n.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const n of e.data.delta.content){if("text"==n.type&&n.text){let e=n.text,s=t.content[n.index];if(!s||"text"!=s.type)throw Error("The snapshot associated with this text delta is not text or missing");this._emit("textDelta",e,s.text)}if(n.index!=Cs(this,us,"f")){if(Cs(this,ds,"f"))switch(Cs(this,ds,"f").type){case"text":this._emit("textDone",Cs(this,ds,"f").text,Cs(this,ls,"f"));break;case"image_file":this._emit("imageFileDone",Cs(this,ds,"f").image_file,Cs(this,ls,"f"))}Es(this,us,n.index,"f")}Es(this,ds,t.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==Cs(this,us,"f")){const t=e.data.content[Cs(this,us,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,Cs(this,ls,"f"));break;case"text":this._emit("textDone",t.text,Cs(this,ls,"f"))}}Cs(this,ls,"f")&&this._emit("messageDone",e.data),Es(this,ls,void 0,"f")}},vs=function(e){const t=Cs(this,rs,"m",_s).call(this,e);switch(Es(this,gs,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&"tool_calls"==n.step_details.type&&n.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(const e of n.step_details.tool_calls)e.index==Cs(this,hs,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(Cs(this,fs,"f")&&this._emit("toolCallDone",Cs(this,fs,"f")),Es(this,hs,e.index,"f"),Es(this,fs,t.step_details.tool_calls[e.index],"f"),Cs(this,fs,"f")&&this._emit("toolCallCreated",Cs(this,fs,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Es(this,gs,void 0,"f"),"tool_calls"==e.data.step_details.type&&Cs(this,fs,"f")&&(this._emit("toolCallDone",Cs(this,fs,"f")),Es(this,fs,void 0,"f")),this._emit("runStepDone",e.data,t)}},xs=function(e){Cs(this,os,"f").push(e),this._emit("event",e)},_s=function(e){switch(e.event){case"thread.run.step.created":return Cs(this,as,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=Cs(this,as,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const s=As.accumulateDelta(t,n.delta);Cs(this,as,"f")[e.data.id]=s}return Cs(this,as,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Cs(this,as,"f")[e.data.id]=e.data}if(Cs(this,as,"f")[e.data.id])return Cs(this,as,"f")[e.data.id];throw new Error("No snapshot available")},Ss=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const e of s.delta.content)if(e.index in t.content){let n=t.content[e.index];t.content[e.index]=Cs(this,rs,"m",js).call(this,e,n)}else t.content[e.index]=e,n.push(e);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},js=function(e,t){return As.accumulateDelta(t,e)},Os=function(e){switch(Es(this,ms,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.cancelling":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Es(this,cs,e.data,"f"),Cs(this,fs,"f")&&(this._emit("toolCallDone",Cs(this,fs,"f")),Es(this,fs,void 0,"f"))}};class ks extends Et{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,s){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e,t={},n){return Re(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,Rs,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class Rs extends Ct{}!function(e){e.MessagesPage=Rs}(ks||(ks={}));class Ns extends Et{retrieve(e,t,n,s={},r){return Re(s)?this.retrieve(e,t,n,{},s):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t,n={},s){return Re(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,Ds,{query:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}}class Ds extends Ct{}!function(e){e.RunStepsPage=Ds}(Ns||(Ns={}));class Ms extends Et{constructor(){super(...arguments),this.steps=new Ns(this._client)}create(e,t,n){const{include:s,...r}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:s},body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,s){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e,t={},n){return Re(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,Is,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const s=await this.create(e,t,n);return await this.poll(e,s.id,n)}createAndStream(e,t,n){return As.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const s={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:r,response:o}=await this.retrieve(e,t,{...n,headers:{...n?.headers,...s}}).withResponse();switch(r.status){case"queued":case"in_progress":case"cancelling":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=o.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await Be(e);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return r}}}stream(e,t,n){return As.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,s){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,s){const r=await this.submitToolOutputs(e,t,n,s);return await this.poll(e,r.id,s)}submitToolOutputsStream(e,t,n,s){return As.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,s)}}class Is extends Ct{}!function(e){e.RunsPage=Is,e.Steps=Ns,e.RunStepsPage=Ds}(Ms||(Ms={}));class Ts extends Et{constructor(){super(...arguments),this.runs=new Ms(this._client),this.messages=new ks(this._client)}create(e={},t){return Re(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return As.createThreadAssistantStream(e,this._client.beta.threads,t)}}!function(e){e.Runs=Ms,e.RunsPage=Is,e.Messages=ks,e.MessagesPage=Rs}(Ts||(Ts={}));class $s extends Et{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e,t={},n){return Re(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,Ls,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const s=await this.create(e,t,n);return await this.poll(e,s.id,n)}async poll(e,t,n){const s={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const r=await this.retrieve(e,t,{...n,headers:s}).withResponse(),o=r.data;switch(o.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=r.response.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await Be(e);break;case"failed":case"completed":return o}}}async upload(e,t,n){const s=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:s.id},n)}async uploadAndPoll(e,t,n){const s=await this.upload(e,t,n);return await this.poll(e,s.id,n)}}class Ls extends Ct{}!function(e){e.VectorStoreFilesPage=Ls}($s||($s={}));class Bs extends Et{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const s=await this.create(e,t);return await this.poll(e,s.id,n)}listFiles(e,t,n={},s){return Re(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,Ls,{query:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}async poll(e,t,n){const s={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:r,response:o}=await this.retrieve(e,t,{...n,headers:s}).withResponse();switch(r.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=o.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await Be(e);break;case"failed":case"cancelled":case"completed":return r}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},s){if(null==t||0==t.length)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const r=s?.maxConcurrency??5,o=Math.min(r,t.length),a=this._client,i=t.values(),l=[...n],c=Array(o).fill(i).map((async function(e){for(let t of e){const e=await a.files.create({file:t,purpose:"assistants"},s);l.push(e.id)}}));return await(async e=>{const t=await Promise.allSettled(e),n=t.filter((e=>"rejected"===e.status));if(n.length){for(const e of n)console.error(e.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const s=[];for(const e of t)"fulfilled"===e.status&&s.push(e.value);return s})(c),await this.createAndPoll(e,{file_ids:l})}}Bs||(Bs={});class Ws extends Et{constructor(){super(...arguments),this.files=new $s(this._client),this.fileBatches=new Bs(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e={},t){return Re(e)?this.list({},e):this._client.getAPIList("/vector_stores",Fs,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class Fs extends Ct{}!function(e){e.VectorStoresPage=Fs,e.Files=$s,e.VectorStoreFilesPage=Ls,e.FileBatches=Bs}(Ws||(Ws={}));class qs extends Et{constructor(){super(...arguments),this.vectorStores=new Ws(this._client),this.chat=new ss(this._client),this.assistants=new Yt(this._client),this.threads=new Ts(this._client)}}!function(e){e.VectorStores=Ws,e.VectorStoresPage=Fs,e.Chat=ss,e.Assistants=Yt,e.AssistantsPage=Gt,e.Threads=Ts}(qs||(qs={}));class Xs extends Et{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return Re(e)?this.list({},e):this._client.getAPIList("/batches",Us,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class Us extends Ct{}!function(e){e.BatchesPage=Us}(Xs||(Xs={}));class Vs extends Et{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,be({body:t,...n}))}}Vs||(Vs={});class Hs extends Et{constructor(){super(...arguments),this.parts=new Vs(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}}!function(e){e.Parts=Vs}(Hs||(Hs={}));class zs extends Pe{constructor({baseURL:e=qe("OPENAI_BASE_URL"),apiKey:t=qe("OPENAI_API_KEY"),organization:n=qe("OPENAI_ORG_ID")??null,project:s=qe("OPENAI_PROJECT_ID")??null,...r}={}){if(void 0===t)throw new Ge("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:n,project:s,...r,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator)throw new Ge("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new At(this),this.chat=new Rt(this),this.embeddings=new Nt(this),this.files=new Dt(this),this.images=new It(this),this.audio=new Bt(this),this.moderations=new Wt(this),this.models=new Ft(this),this.fineTuning=new Jt(this),this.beta=new qs(this),this.batches=new Xs(this),this.uploads=new Hs(this),this._options=o,this.apiKey=t,this.organization=n,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return function(e,t={}){let n=e;const s=function(e=St){if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");const t=e.charset||St.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=dt;if(void 0!==e.format){if(!yt.call(ht,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const s=ht[n];let r,o=St.filter;if(("function"==typeof e.filter||bt(e.filter))&&(o=e.filter),r=e.arrayFormat&&e.arrayFormat in wt?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":St.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=void 0===e.allowDots?1==!!e.encodeDotInKeys||St.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:St.addQueryPrefix,allowDots:a,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:St.allowEmptyArrays,arrayFormat:r,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:St.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?St.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:St.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:St.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:St.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:St.encodeValuesOnly,filter:o,format:n,formatter:s,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:St.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:St.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:St.strictNullHandling}}(t);let r,o;"function"==typeof s.filter?(o=s.filter,n=o("",n)):bt(s.filter)&&(o=s.filter,r=o);const a=[];if("object"!=typeof n||null===n)return"";const i=wt[s.arrayFormat],l="comma"===i&&s.commaRoundTrip;r||(r=Object.keys(n)),s.sort&&r.sort(s.sort);const c=new WeakMap;for(let e=0;e<r.length;++e){const t=r[e];s.skipNulls&&null===n[t]||xt(a,Ot(n[t],t,i,l,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,c))}const u=a.join(s.delimiter);let d=!0===s.addQueryPrefix?"?":"";return s.charsetSentinel&&("iso-8859-1"===s.charset?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""}(e,{arrayFormat:"brackets"})}}Ps=zs,zs.OpenAI=Ps,zs.DEFAULT_TIMEOUT=6e5,zs.OpenAIError=Ge,zs.APIError=Ke,zs.APIConnectionError=Qe,zs.APIConnectionTimeoutError=et,zs.APIUserAbortError=Ze,zs.NotFoundError=rt,zs.ConflictError=ot,zs.RateLimitError=it,zs.BadRequestError=tt,zs.AuthenticationError=nt,zs.InternalServerError=lt,zs.PermissionDeniedError=st,zs.UnprocessableEntityError=at,zs.toFile=me,zs.fileFromPath=Q;const{vc:Js,LG:Ys,xX:Gs,qA:Ks,cH:Zs,m_:Qs,fK:er,OE:tr,v7:nr,v3:sr,PO:rr,Ll:or,Is:ar}=e;!function(e){e.Page=Pt,e.CursorPage=Ct,e.Completions=At,e.Chat=Rt,e.Embeddings=Nt,e.Files=Dt,e.FileObjectsPage=Mt,e.Images=It,e.Audio=Bt,e.Moderations=Wt,e.Models=Ft,e.ModelsPage=qt,e.FineTuning=Jt,e.Beta=qs,e.Batches=Xs,e.BatchesPage=Us,e.Uploads=Hs}(zs||(zs={})),new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations"]);const ir=zs;const lr=function(e){var s=e.context,r=e.tone,o=e.length,a=e.triggerGenerate,i=(0,n.useState)(""),l=i[0],c=i[1],u=(0,n.useState)(!1),d=u[0],h=u[1];return(0,n.useEffect)((function(){var e,t,n,i;a&&(e=void 0,t=void 0,i=function(){var e,t,n;return function(e,t){var n,s,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=i(0),a.throw=i(1),a.return=i(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(o=0)),o;)try{if(n=1,s&&(r=2&i[0]?s.return:i[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,i[1])).done)return r;switch(s=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,s=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],s=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(a){switch(a.label){case 0:h(!0),e=new ir({apiKey:"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",dangerouslyAllowBrowser:!0}),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,e.chat.completions.create({model:"gpt-4",messages:[{role:"system",content:"You are an assistant that generates professional email responses."},{role:"user",content:"Context: ".concat(s,"\n\nTone: ").concat(r,"\n\nLength: ").concat(o,"\n\nPlease generate an email response based on this context.")}],max_tokens:150,temperature:.5})];case 2:return t=a.sent(),c(t.choices[0].message.content||""),[3,5];case 3:return n=a.sent(),console.error("Error generating response:",n),c("Error generating the response. Please try again."),[3,5];case 4:return h(!1),[7];case 5:return[2]}}))},new((n=void 0)||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())})))}),[a]),(0,t.jsxs)("div",{className:"mt-2",children:[d&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,t.jsx)("div",{className:"text-center text-white",children:(0,t.jsx)("div",{className:"border-4 border-white border-opacity-30 border-t-4 border-t-white rounded-full w-10 h-10 animate-spin"})})}),l&&(0,t.jsxs)("div",{className:"text-[#222] mt-3 p-4 mb-1 bg-gray-100 rounded-md",children:[(0,t.jsx)("h3",{className:"font-bold mb-2",children:"Generated Response:"}),(0,t.jsx)("p",{children:l})]})]})};function cr(e){return g({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m476.59 227.05-.16-.07L49.35 49.84A23.56 23.56 0 0 0 27.14 52 24.65 24.65 0 0 0 16 72.59v113.29a24 24 0 0 0 19.52 23.57l232.93 43.07a4 4 0 0 1 0 7.86L35.53 303.45A24 24 0 0 0 16 327v113.31A23.57 23.57 0 0 0 26.59 460a23.94 23.94 0 0 0 13.22 4 24.55 24.55 0 0 0 9.52-1.93L476.4 285.94l.19-.09a32 32 0 0 0 0-58.8z"},child:[]}]})(e)}function ur(e){return g({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M262.29 192.31a64 64 0 1 0 57.4 57.4 64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22 155.3 155.3 0 0 1-21.46-12.57 16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22 155.3 155.3 0 0 1 21.46 12.57 16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z"},child:[]}]})(e)}function dr(e){return g({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.76282 17H20V5H4V18.3851L5.76282 17ZM6.45455 19L2 22.5V4C2 3.44772 2.44772 3 3 3H21C21.5523 3 22 3.44772 22 4V18C22 18.5523 21.5523 19 21 19H6.45455ZM11 14H13V16H11V14ZM8.56731 8.81346C8.88637 7.20919 10.302 6 12 6C13.933 6 15.5 7.567 15.5 9.5C15.5 11.433 13.933 13 12 13H11V11H12C12.8284 11 13.5 10.3284 13.5 9.5C13.5 8.67157 12.8284 8 12 8C11.2723 8 10.6656 8.51823 10.5288 9.20577L8.56731 8.81346Z"},child:[]}]})(e)}function hr(e){return g({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"},child:[]}]})(e)}const fr=function(){return(0,t.jsxs)("div",{className:"bg-white pt-6 pb-3 px-7 flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:"ChatGPT Writer"}),(0,t.jsxs)("span",{className:"ml-2 text-xs bg-gray-200 text-gray-600 px-1.5 py-0.5 rounded flex items-center gap-2 rounded-lg",children:["PRO ",(0,t.jsx)(hr,{})]})]}),(0,t.jsxs)("div",{className:"w-[120px] flex items-center justify-between",children:[(0,t.jsx)("button",{className:"text-gray-400 hover:text-gray-600 text-2xl",children:(0,t.jsx)(ur,{})}),(0,t.jsx)("button",{className:"text-gray-400 hover:text-gray-600 text-2xl",children:(0,t.jsx)(dr,{})}),(0,t.jsx)("button",{className:"text-gray-400 hover:text-gray-600 text-2xl",onClick:function(){window.parent.postMessage({type:"TOGGLE_DIALOG"},"*")},children:(0,t.jsx)(W,{})})]})]})};function pr(e){return g({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}const mr=function(){var e=(0,n.useState)(""),s=e[0],r=e[1],o=(0,n.useState)(""),a=o[0],i=o[1],c=(0,n.useState)("GPT 4o Mini"),u=(c[0],c[1]),d=(0,n.useState)("Writing tone"),h=d[0],f=d[1],p=(0,n.useState)("Length"),m=p[0],g=p[1],y=(0,n.useState)(!1),w=y[0],b=y[1],_=(0,n.useState)(!1),S=_[0],j=_[1],O=function(e){j(!e)},P=(0,n.useState)({width:700,height:300}),C=(P[0],P[1],window.innerWidth/2-350),E=window.innerHeight/2-150,A=(0,n.useState)({x:C,y:E});return A[0],A[1],(0,t.jsx)(l(),{children:(0,t.jsxs)("div",{className:"cursor-pointer w-[700px] bg-white shadow-lg rounded-lg overflow-hidden position-relative",style:{zIndex:"9999991",left:"50vw - 350px",top:"50vh - 100px"},children:[(0,t.jsx)(fr,{}),!S&&(0,t.jsxs)("div",{className:"cursor-pointer t-[32px] m-[35px] flex items-center text-[#222] gap-2 ml-8 rounded border border-brown w-[107px] p-1 bg-yellow text-[13px]",onClick:function(){return O(!1)},children:["Add Context",(0,t.jsx)(pr,{})]}),(0,t.jsxs)("div",{className:"m-4 border border-brown rounded-custom-small",children:[S&&(0,t.jsx)(v,{hadleContext:O,placeholder:"Add any additional information for your prompt",value:s,onChange:r}),(0,t.jsx)(x,{placeholder:"Enter your prompt for the AI",value:a,onChange:i}),(0,t.jsxs)("div",{className:"ml-4 flex space-x-2 justify-between px-3",children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(F,{onChange:u}),(0,t.jsx)(X,{onChange:f}),(0,t.jsx)(U,{onChange:g})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{onClick:function(){b((function(e){return!e}))},className:"bg-gradient-to-r from-blue-300 to-blue-500 rounded-xl py-2 px-4 h-[36px]",children:(0,t.jsx)(cr,{color:"#fff",fontSize:20,height:36})})})]}),(0,t.jsx)(lr,{context:s,tone:h,length:m,triggerGenerate:w})]})]})})};var gr=null,yr=!1;function wr(e,n){yr=!yr,(null==gr||n)&&(gr=a.createRoot(e)),n&&(yr=!0),yr?gr.render((0,t.jsx)(s().StrictMode,{children:(0,t.jsx)(mr,{})})):gr.render(null)}})(),o})()));
//# sourceMappingURL=modal.js.map